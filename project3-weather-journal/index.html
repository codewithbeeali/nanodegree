<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Weather Journal</title>
<link href="https://fonts.googleapis.com/css?family=Oswald:400,600,700|Ranga:400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
<script>
    const API_KEY ='6ea98b0695800adff83129a68604944e';
    function validateFormData(){
        let zipCode = document.getElementById('zip');
        let comments = document.getElementById('feelings');


        console.log('== Inside validateFormData ===');
        if(zipCode === null && comments === null){
            console.log('element not found');
        }
        else{
            zipCode = zipCode.value;
            comments = comments.value;
            console.log(zipCode , comments );
            if((zipCode && zipCode.trim().length > 0) && (comments && comments.trim().length > 0)){
                document.getElementById('generate').removeAttribute('disabled');
                
            }
            else{
                document.getElementById('generate').setAttribute('disabled','true');
            }
        }
    }

    async function getWeatherData(){
        let zipCode = document.getElementById('zip');
        console.log('--- inside weatherData ----');
        const response = await fetch(`http://api.openweathermap.org/geo/1.0/zip?zip=${zipCode.value},AU&appid=${API_KEY}`) 
        const weatherData = await response.json();
        console.log(weatherData)

        const weatherResponse = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${weatherData.lat}&lon=${weatherData.lon}&appid=${API_KEY}`)
            const weatherJson = await weatherResponse.json()
            return weatherJson

        
    }

</script>
</head>
 <body>
<div id = "app">
  <div class ="holder headline">
    Weather Journal App
  </div>
  <div class ="holder zip">
    <label for="zip">Enter Zipcode here</label>
    <input type="text" id="zip" placeholder="enter zip code here" onkeyup="validateFormData();">
  </div>
  <div class ="holder feel">
    <label for="feelings">How are you feeling today?</label>
    <textarea class= "myInput" id="feelings" placeholder="Enter your feelings here" rows="9" cols="50" onkeyup="validateFormData();"></textarea>
    <button id="generate" type = "submit" onclick="getWeatherData();" disabled> Generate </button>
  </div>
  <!-- <div class ="holder entry">
    <div class = "title">Most Recent Entry</div>
   <div id = "entryHolder">
    <div id = "date"></div> 
   <div id = "temp"></div>
   <div id = "content"></div>
  </div>
  </div> -->
  </div>
<script src="app.js" type="text/javascript"></script>

</body>
</html>